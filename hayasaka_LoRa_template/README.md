# Hayasaka LoRa Template

## 概要
早坂研究室で開発されたLoRaネットワークシミュレーションテンプレートです。クラスタリングと干渉推定機能を含む高度なネットワーク解析機能を提供します。

## ファイル構成

### メインシミュレーションファイル
- **`RCS_test.jl`** - メインシミュレーションファイル
  - キャリアセンス機能付きLoRaシミュレーション
  - クラスタリング機能（スペクトラルクラスタリング）
  - 干渉推定と分析機能
  - 隠れ端末問題の推定

### サポートファイル
- **`param.jl`** - パラメータ設定
  - シミュレーション設定
  - LoRa物理層パラメータ
  - 伝搬モデルパラメータ

- **`Node.jl`** - 端末データ構造
  - 端末パラメータの定義
  - 状態管理機能

- **`base_function.jl`** - 基本関数群
  - 伝搬モデル関数
  - SNR/SIR判定関数
  - パケット生成関数

- **`shadowing.jl`** - シャドウイングモデル
  - 空間相関シャドウイング
  - 素波合成法

- **`ppp.jl`** - ポアソン点過程
  - 端末配置生成
  - 干渉端末配置

- **`interference.jl`** - 干渉モデル
  - 干渉端末の定義
  - 干渉解析機能

- **`result.jl`** - 結果データ構造
  - シミュレーション結果の定義

### 結果ファイル（result/）
- **日時フォルダ**: 実行日時ごとの結果保存
- **CSVファイル**: 各種性能指標の時系列データ
- **設定ファイル**: 実行時のパラメータ保存

## 主な機能

### 1. LoRa通信シミュレーション
- **キャリアセンス**: CSMA/CA機能
- **バックオフ**: 衝突回避制御
- **マルチチャネル**: 複数周波数チャネル対応

### 2. クラスタリング機能
- **スペクトラルクラスタリング**: 端末のグループ化
- **隠れ端末推定**: 干渉関係の推定
- **チャネル割り当て**: クラスタごとの周波数割り当て

### 3. 干渉分析
- **干渉推定**: システム内外の干渉分析
- **隠れ端末検出**: 隠れ端末問題の特定
- **干渉分類**: 干渉源の分類と分析

### 4. 伝搬モデル
- **パスロス**: 距離依存減衰
- **シャドウイング**: 空間相関シャドウイング
- **クロックドリフト**: 端末間の時刻ずれ

## 実行方法

### 基本実行
```bash
julia RCS_test.jl
```

### 並列実行
```bash
julia -p auto RCS_test.jl
```

## 出力結果

### 1. 時系列データ
- **PDR（Packet Delivery Rate）**: パケット配信率
- **衝突率**: パケット衝突率
- **破棄率**: パケット破棄率
- **スループット**: データ転送効率

### 2. クラスタリング結果
- **クラスタ構成**: 端末のグループ化結果
- **隠れ端末推定**: 干渉関係の推定結果
- **チャネル割り当て**: 周波数割り当て結果

### 3. 干渉分析結果
- **干渉推定精度**: 干渉推定の精度評価
- **隠れ端末検出率**: 隠れ端末検出の成功率

## パラメータ設定

### シミュレーション設定
- **シミュレーション時間**: 3日間（4320分）
- **端末台数**: 250台まで
- **シミュレーション回数**: 1000回

### LoRa設定
- **帯域幅**: 125kHz
- **送信電力**: 13dBm
- **搬送波周波数**: 923.2MHz
- **SF範囲**: 7-10

### 伝搬モデル
- **パスロス係数**: α=4.0, β=9.5, γ=4.5
- **シャドウイング**: 標準偏差3.48dB
- **相関距離**: 50m

## 特徴
- **物理層簡略化**: 実際のLoRa変調・復調は簡略化
- **ネットワーク層重視**: 上位層の機能を詳細実装
- **研究用途**: ネットワーク性能評価に特化
- **高度な解析**: クラスタリングと干渉分析機能
